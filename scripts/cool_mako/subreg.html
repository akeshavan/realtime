## subreg.html
<%inherit file="base.html" />

  <%block name="logout">
    <li><a href="../">Logout</a></li>
  </%block>  <!-- end logout-->
   
        <div class="span6">
          <h1>${subject_id}</h1>
          <p>${time}</p>
          <div class="tabbable tabs-left">
            <ul class="nav nav-tabs">
              
              % for i,P in enumerate(Protocol): 
                 % if P["active"]:
                      <li class="active">
                      <a href="#l${i}" data-toggle="tab" onclick="$.get('setTab', {tab:'${i}'})">
                  % else:
                      <li class="">
                      <a href="#l${i}" data-toggle="tab" onclick="$.get('setTab', {tab:'${i}'})">
                  % endif
	          ${P["name"]}
	          </a></li>
              % endfor
            </ul>
            <div class="tab-content">
              % for i,P in enumerate(Protocol):
                  % if P["active"]:
                      <div class="tab-pane active" id="l${i}">
                  % else:
                      <div class="tab-pane" id="l${i}">
                  % endif
                  <p>${P['name']}</p>
                  <form class="well" method="post" action='formHandler'>
                    % for j,S in enumerate(Protocol[i]["Steps"]):
                        % if S["ui"] == "button":
                              <button type="submit" class="btn" value="${S['text']}" name="button">${S["text"]}</button>
                        % elif S["ui"] == "checkbox":
			      <label class="checkbox">
                              <input type="checkbox"> ${S["text"]}</label>
		        % elif S["ui"] == "loop":
			   <p> Run ${S["runNum"]}</p>
                           % for k, step in enumerate(S["Steps"]):
                               % if step["ui"] == "button":
			           % if S["runNum"] == P["activeRunNum"]:
                                       <button type="submit" class="btn" value="${step['text']} ${S['runNum']}" name="button">${step["text"]}</button>
				   % else:
                                       <button name="button" disabled type="submit" class="btn" value="${step['text']} ${S['runNum']}">${step["text"]}</button>
                                   % endif <!--S[runNum]... -->
                               % elif step["ui"] == "checkbox":
                                   <label class="checkbox"><input type="checkbox"> ${step["text"]}</label>
                               % endif
                           %endfor  <!-- for k, step... -->
                        % endif <!-- S[ui] -->
                    % endfor
                    <button type="submit" class="btn">Redo</button>
                  </form>
                   </div>
              % endfor
              
            </div>
          </div> <!-- /tabbable -->
    
        </div>  <!-- span6 -->
        
    <%block name="javascriptFunctions">
      <script>
      function setTab(idx){} 
      </script>
    </%block>
